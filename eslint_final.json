[{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\auth\\Restricted.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":24,"column":9,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":24,"endColumn":43,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[972,1006],"text":"// @ts-expect-error - dynamic key access"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useUserStore } from '../../store/userStore';\r\nimport { PackageTier } from '../../constants/packages';\r\nimport { Sparkles, Lock } from 'lucide-react';\r\nimport { UpgradeModal } from '../ui/UpgradeModal';\r\n\r\ninterface RestrictedProps {\r\n    to?: PackageTier; // Minimum tier required, defaults to GUARDIAN if not specified but feature flag is used\r\n    feature?: string; // Feature flag name in PackageFeatures\r\n    children: React.ReactNode;\r\n    fallback?: React.ReactNode;\r\n}\r\n\r\nexport const Restricted: React.FC<RestrictedProps> = ({ to, feature, children, fallback }) => {\r\n    const { profile, features } = useUserStore();\r\n    const [isUpgradeModalOpen, setIsUpgradeModalOpen] = useState(false);\r\n\r\n    // If no specific requirement, assume we just need to be logged in (which is handled by routing)\r\n    // But here we are checking for *premium* features.\r\n\r\n    let hasAccess = true;\r\n\r\n    if (feature) {\r\n        // @ts-ignore - dynamic key access\r\n        if (!features[feature]) {\r\n            hasAccess = false;\r\n        }\r\n    }\r\n\r\n    if (to) {\r\n        // Simple hierarchy check: Novice < Guardian < Aetherius\r\n        const tiers = [PackageTier.NOVICE, PackageTier.GUARDIAN, PackageTier.AETHERIUS];\r\n        const userTierIndex = tiers.indexOf(profile?.packageTier || PackageTier.NOVICE);\r\n        const requiredTierIndex = tiers.indexOf(to);\r\n\r\n        if (userTierIndex < requiredTierIndex) {\r\n            hasAccess = false;\r\n        }\r\n    }\r\n\r\n    if (hasAccess) {\r\n        return <>{children}</>;\r\n    }\r\n\r\n    if (fallback) {\r\n        return <>{fallback}</>;\r\n    }\r\n\r\n    // Default Fallback: Locked State UI\r\n    return (\r\n        <>\r\n            <div className=\"flex flex-col items-center justify-center p-8 text-center glass rounded-2xl border border-white/5\">\r\n                <div className=\"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center mb-4\">\r\n                    <Lock className=\"w-6 h-6 text-gray-400\" />\r\n                </div>\r\n                <h3 className=\"text-lg font-bold text-white mb-2\">Premium Feature</h3>\r\n                <p className=\"text-gray-400 text-sm mb-6 max-w-md\">\r\n                    This feature is available exclusively to\r\n                    <span className=\"text-brand-emerald font-bold mx-1\">Master Alchemist</span>\r\n                    and\r\n                    <span className=\"text-cyan-400 font-bold mx-1\">Grandmaster</span>\r\n                    members.\r\n                </p>\r\n                <button\r\n                    onClick={() => setIsUpgradeModalOpen(true)}\r\n                    className=\"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-full font-bold text-white shadow-lg shadow-emerald-500/20 hover:scale-105 transition-transform cursor-pointer\"\r\n                >\r\n                    <Sparkles className=\"w-4 h-4\" />\r\n                    Upgrade to Unlock\r\n                </button>\r\n            </div>\r\n\r\n            <UpgradeModal\r\n                isOpen={isUpgradeModalOpen}\r\n                onClose={() => setIsUpgradeModalOpen(false)}\r\n            />\r\n        </>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\layout\\DashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\layout\\PageTransition.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\layout\\PublicLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\pwa\\IOSInstallInstructions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\pwa\\InstallPrompt.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\pwa\\OfflineBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\social\\CreateGuildModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\social\\GuildChat.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\social\\HeroCard.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchUserData'. Either include it or remove the dependency array.","line":36,"column":8,"nodeType":"ArrayExpression","endLine":36,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [fetchUserData, isOpen, userId]","fix":{"range":[1219,1235],"text":"[fetchUserData, isOpen, userId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { X, Trophy, Shield, Star, User, Hash } from 'lucide-react';\r\nimport { GlassCard } from '../ui/GlassCard';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport { db } from '../../lib/firebase';\r\nimport type { UserProfileData as UserProfile, EquippedItemsData as EquippedItems } from '../../lib/firebaseTypes';\r\nimport { ACHIEVEMENTS } from '../../lib/achievements';\r\n\r\ninterface HeroCardProps {\r\n    userId: string;\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\ninterface PublicUserData {\r\n    profile: UserProfile;\r\n    level: number;\r\n    equipped: EquippedItems;\r\n    unlockedAchievements: string[];\r\n}\r\n\r\nexport const HeroCard: React.FC<HeroCardProps> = ({ userId, isOpen, onClose }) => {\r\n    const [data, setData] = useState<PublicUserData | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && userId) {\r\n            fetchUserData();\r\n        } else {\r\n            setData(null);\r\n            setLoading(true);\r\n            setError(null);\r\n        }\r\n    }, [isOpen, userId]);\r\n\r\n    const fetchUserData = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const ref = doc(db, 'users', userId, 'data', 'aether');\r\n            const snap = await getDoc(ref);\r\n\r\n            if (snap.exists()) {\r\n                const userData = snap.data() as Partial<PublicUserData>;\r\n                if (!userData.profile) {\r\n                    setError(\"Profile data is missing.\");\r\n                } else if (userData.profile.isPublic === false) {\r\n                    setError(\"This profile is private.\");\r\n                } else {\r\n                    setData({\r\n                        profile: userData.profile,\r\n                        level: userData.level || 1,\r\n                        equipped: userData.equipped || { theme: 'default', frame: 'none', title: 'Novice' },\r\n                        unlockedAchievements: userData.unlockedAchievements || []\r\n                    });\r\n                }\r\n            } else {\r\n                setError(\"User not found.\");\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n            setError(\"Failed to load profile.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm\" onClick={onClose}>\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                        onClick={(evt) => evt.stopPropagation()}\r\n                        className=\"w-full max-w-md\"\r\n                    >\r\n                        <GlassCard className=\"relative overflow-hidden\" glow=\"cyan\">\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 transition-colors z-20\"\r\n                            >\r\n                                <X className=\"w-5 h-5 text-gray-400\" />\r\n                            </button>\r\n\r\n                            {loading ? (\r\n                                <div className=\"py-20 flex flex-col items-center justify-center text-gray-400\">\r\n                                    <div className=\"w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4\" />\r\n                                    <p>Summoning Hero...</p>\r\n                                </div>\r\n                            ) : error ? (\r\n                                <div className=\"py-20 flex flex-col items-center justify-center text-rose-400 text-center\">\r\n                                    <Shield className=\"w-12 h-12 mb-4 opacity-50\" />\r\n                                    <p className=\"font-bold\">{error}</p>\r\n                                </div>\r\n                            ) : data ? (\r\n                                <div className=\"relative z-10\">\r\n                                    {/* Header / Avatar */}\r\n                                    <div className=\"flex flex-col items-center mb-6\">\r\n                                        <div className=\"w-24 h-24 rounded-3xl bg-gradient-to-tr from-cyan-500/20 to-blue-500/20 border border-cyan-500/30 flex items-center justify-center text-5xl mb-4 shadow-lg shadow-cyan-500/10\">\r\n                                            {data.profile.avatar || <User className=\"w-12 h-12 text-cyan-400\" />}\r\n                                        </div>\r\n                                        <h2 className=\"text-2xl font-black text-white text-center\">\r\n                                            {data.profile.name || 'Unknown Hero'}\r\n                                        </h2>\r\n                                        <div className=\"text-emerald-400 text-xs font-black uppercase tracking-[0.2em] mt-1 text-center\">\r\n                                            {\r\n                                                (() => {\r\n                                                    const tId = data.equipped?.title || 'Novice';\r\n                                                    if (tId === 'Novice') return 'Novice';\r\n                                                    return ACHIEVEMENTS.find(a => a.id === tId)?.title || 'Novice';\r\n                                                })()\r\n                                            }\r\n                                        </div>\r\n                                        {data.profile.bio && (\r\n                                            <p className=\"text-sm text-gray-400 mt-2 text-center max-w-[80%] italic\">\r\n                                                \"{data.profile.bio}\"\r\n                                            </p>\r\n                                        )}\r\n                                        <div className=\"flex items-center gap-2 mt-3\">\r\n                                            <span className=\"px-3 py-1 rounded-full bg-cyan-500/10 border border-cyan-500/20 text-cyan-400 text-xs font-bold uppercase tracking-wider\">\r\n                                                Level {data.level}\r\n                                            </span>\r\n                                            {data.profile.guildId && (\r\n                                                <span className=\"px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-xs font-bold uppercase tracking-wider flex items-center gap-1\">\r\n                                                    <Shield className=\"w-3 h-3\" /> Guild Member\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Stats Grid */}\r\n                                    <div className=\"grid grid-cols-2 gap-3 mb-6\">\r\n                                        <div className=\"bg-white/5 rounded-xl p-3 flex items-center gap-3\">\r\n                                            <Trophy className=\"w-8 h-8 text-amber-400 p-1.5 bg-amber-500/10 rounded-lg\" />\r\n                                            <div>\r\n                                                <div className=\"text-lg font-bold text-white mb-0.5\">\r\n                                                    {data.unlockedAchievements.length}\r\n                                                </div>\r\n                                                <div className=\"text-[10px] text-gray-500 uppercase font-bold\">Achievements</div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"bg-white/5 rounded-xl p-3 flex items-center gap-3\">\r\n                                            <Star className=\"w-8 h-8 text-emerald-400 p-1.5 bg-emerald-500/10 rounded-lg\" />\r\n                                            <div>\r\n                                                <div className=\"text-lg font-bold text-white mb-0.5\">\r\n                                                    {data.profile.difficulty || 'Casual'}\r\n                                                </div>\r\n                                                <div className=\"text-[10px] text-gray-500 uppercase font-bold\">Difficulty</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Footer */}\r\n                                    <div className=\"text-center\">\r\n                                        <p className=\"text-[10px] text-gray-600 flex items-center justify-center gap-1\">\r\n                                            <Hash className=\"w-3 h-3\" /> ID: {userId.slice(0, 8)}...\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            ) : null}\r\n\r\n                            {/* Decorative Background */}\r\n                            <div className=\"absolute top-0 right-0 w-64 h-64 bg-cyan-500/10 blur-[100px] rounded-full pointer-events-none -translate-y-1/2 translate-x-1/2\" />\r\n                            <div className=\"absolute bottom-0 left-0 w-64 h-64 bg-indigo-500/10 blur-[100px] rounded-full pointer-events-none translate-y-1/2 -translate-x-1/2\" />\r\n                        </GlassCard>\r\n                    </motion.div>\r\n                </div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\social\\RaidBoss.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\trackers\\BodyMetrics.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":36,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Ruler } from 'lucide-react';\r\nimport { useTrackersStore } from '../../store/trackersStore';\r\n\r\nexport function BodyMetrics() {\r\n    const { bodyProfile, updateBodyMeasurements } = useTrackersStore();\r\n\r\n    // Local state for inputs\r\n    const [neck, setNeck] = useState(bodyProfile?.measurements?.neckCm || 0);\r\n    const [waist, setWaist] = useState(bodyProfile?.measurements?.waistCm || 0);\r\n    const [hip, setHip] = useState(bodyProfile?.measurements?.hipCm || 0);\r\n    const [chest, setChest] = useState(bodyProfile?.measurements?.chestCm || 0);\r\n\r\n    // Calculate Body Fat (US Navy Method)\r\n    const calculateBF = () => {\r\n        if (!bodyProfile?.heightCm || !neck || !waist) return null;\r\n\r\n        const h = bodyProfile.heightCm;\r\n        const n = neck;\r\n        const w = waist;\r\n        const hips = hip;\r\n\r\n        // Formula depends on gender\r\n        // Men: 495 / (1.0324 - 0.19077 * log10(waist - neck) + 0.15456 * log10(height)) - 450\r\n        // Women: 495 / (1.29579 - 0.35004 * log10(waist + hip - neck) + 0.22100 * log10(height)) - 450\r\n\r\n        try {\r\n            if (bodyProfile.gender === 'male') {\r\n                if (w - n <= 0) return 0;\r\n                return 495 / (1.0324 - 0.19077 * Math.log10(w - n) + 0.15456 * Math.log10(h)) - 450;\r\n            } else {\r\n                if (w + hips - n <= 0) return 0;\r\n                return 495 / (1.29579 - 0.35004 * Math.log10(w + hips - n) + 0.22100 * Math.log10(h)) - 450;\r\n            }\r\n        } catch (e) {\r\n            return 0;\r\n        }\r\n    };\r\n\r\n    const bf = calculateBF();\r\n\r\n\r\n    const handleSave = () => {\r\n        updateBodyMeasurements({\r\n            neckCm: neck,\r\n            waistCm: waist,\r\n            hipCm: hip,\r\n            chestCm: chest\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-brand-card/50 backdrop-blur-md rounded-2xl p-6 border border-white/5 space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"p-2 bg-emerald-500/20 rounded-lg text-emerald-400\">\r\n                        <Ruler size={24} />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-xl font-bold text-white\">Body Metrics</h3>\r\n                        <div className=\"text-xs text-zinc-400\">US Navy Method</div>\r\n                    </div>\r\n                </div>\r\n                {bf !== null && (\r\n                    <div className=\"bg-emerald-500/10 px-4 py-2 rounded-xl border border-emerald-500/20 text-right\">\r\n                        <div className=\"text-xs text-emerald-400\">Body Fat Est.</div>\r\n                        <div className=\"text-xl font-bold text-white\">{bf.toFixed(1)}%</div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <InputGroup label=\"Neck (cm)\" value={neck} onChange={setNeck} />\r\n                <InputGroup label=\"Waist (cm)\" value={waist} onChange={setWaist} />\r\n                {bodyProfile?.gender === 'female' && (\r\n                    <InputGroup label=\"Hips (cm)\" value={hip} onChange={setHip} />\r\n                )}\r\n                <InputGroup label=\"Chest (cm)\" value={chest} onChange={setChest} />\r\n            </div>\r\n\r\n            <motion.button\r\n                whileHover={{ scale: 1.02 }}\r\n                whileTap={{ scale: 0.98 }}\r\n                onClick={handleSave}\r\n                className=\"w-full py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl font-medium shadow-lg shadow-emerald-500/20 transition-colors\"\r\n            >\r\n                Update Metrics\r\n            </motion.button>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst InputGroup = ({ label, value, onChange }: { label: string, value: number, onChange: (v: number) => void }) => (\r\n    <div className=\"space-y-1\">\r\n        <label className=\"text-xs text-zinc-400\">{label}</label>\r\n        <input\r\n            type=\"number\"\r\n            value={value || ''}\r\n            onChange={(e) => onChange(Number(e.target.value))}\r\n            className=\"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-2 text-white focus:outline-none focus:border-emerald-500\"\r\n            placeholder=\"0\"\r\n        />\r\n    </div>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\trackers\\SleepTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\trackers\\StreakCalendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\AnimatedBackground.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\Badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\ChatBubble.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\CircularProgress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\CountdownTimer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\CustomCursor.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":20,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":20,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\FoodSearch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\GamificationOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\GlassCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\MiniTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\NavBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\ProgressBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\QuestCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\Skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\StatCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\TabBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\UpgradeModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\XPRing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":8,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":8,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":61,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":61,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\constants\\packages.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\context\\ToastContext.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":21,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":21,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\hooks\\useGreeting.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\ShopData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\SoundManager.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":16,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback } from 'react';\r\n\r\n// Simple beep sounds using AudioContext or base64 to avoid external assets for now\r\n// These are short, synthesized sounds\r\n\r\nclass AudioController {\r\n    private ctx: AudioContext | null = null;\r\n    private volume: number = 0.3;\r\n\r\n    constructor() {\r\n        try {\r\n            const AudioContextClass = window.AudioContext || ((window as unknown) as { webkitAudioContext: typeof AudioContext }).webkitAudioContext;\r\n            if (AudioContextClass) {\r\n                this.ctx = new AudioContextClass();\r\n            }\r\n        } catch (e) {\r\n            console.warn('AudioContext not supported');\r\n        }\r\n    }\r\n\r\n    play(type: 'click' | 'success' | 'error' | 'levelUp') {\r\n        if (!this.ctx) return;\r\n        if (this.ctx.state === 'suspended') this.ctx.resume();\r\n\r\n        const osc = this.ctx.createOscillator();\r\n        const gain = this.ctx.createGain();\r\n\r\n        osc.connect(gain);\r\n        gain.connect(this.ctx.destination);\r\n\r\n        const now = this.ctx.currentTime;\r\n\r\n        switch (type) {\r\n            case 'click':\r\n                // High pitch short blip\r\n                osc.type = 'sine';\r\n                osc.frequency.setValueAtTime(800, now);\r\n                osc.frequency.exponentialRampToValueAtTime(400, now + 0.1);\r\n                gain.gain.setValueAtTime(this.volume * 0.5, now);\r\n                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);\r\n                osc.start(now);\r\n                osc.stop(now + 0.1);\r\n                break;\r\n\r\n            case 'success':\r\n                // Ascending major arpeggio\r\n                osc.type = 'triangle';\r\n                osc.frequency.setValueAtTime(440, now); // A4\r\n                osc.frequency.setValueAtTime(554.37, now + 0.1); // C#5\r\n                osc.frequency.setValueAtTime(659.25, now + 0.2); // E5\r\n                gain.gain.setValueAtTime(this.volume, now);\r\n                gain.gain.linearRampToValueAtTime(0, now + 0.5);\r\n                osc.start(now);\r\n                osc.stop(now + 0.6);\r\n                break;\r\n\r\n            case 'error':\r\n                // Low buzzing descending\r\n                osc.type = 'sawtooth';\r\n                osc.frequency.setValueAtTime(150, now);\r\n                osc.frequency.linearRampToValueAtTime(100, now + 0.2);\r\n                gain.gain.setValueAtTime(this.volume, now);\r\n                gain.gain.linearRampToValueAtTime(0, now + 0.3);\r\n                osc.start(now);\r\n                osc.stop(now + 0.3);\r\n                break;\r\n\r\n            case 'levelUp':\r\n                // Grand fanfare\r\n                osc.type = 'triangle';\r\n                osc.frequency.setValueAtTime(440, now);\r\n                osc.frequency.setValueAtTime(440, now + 0.2);\r\n                osc.frequency.setValueAtTime(440, now + 0.4);\r\n                osc.frequency.setValueAtTime(659.25, now + 0.6); // E5 long\r\n                gain.gain.setValueAtTime(this.volume, now);\r\n                gain.gain.setValueAtTime(0.01, now + 2);\r\n                osc.start(now);\r\n                osc.stop(now + 2);\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\nconst audioController = new AudioController();\r\n\r\nexport const useSound = () => {\r\n    const play = useCallback((type: 'click' | 'success' | 'error' | 'levelUp') => {\r\n        // Check if user has muted sfx in settings (future feature: check store)\r\n        audioController.play(type);\r\n    }, []);\r\n\r\n    return { play };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\achievements.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\aiCache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\aiFoodAnalyzer.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":210,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":210,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { aiGenerateJSON, aiGenerate, isAIAvailable } from './aiProvider';\r\nimport { lookupFood, cacheAIFood } from './aiCache';\r\nimport { addFoodToGlobalDB } from './foodService';\r\nimport type { FoodNutritionCache } from '../store/aiStore';\r\n\r\n// ÔöÇÔöÇ Types ÔöÇÔöÇ\r\n\r\nexport interface FoodAnalysis {\r\n    name: string;\r\n    calories: number;\r\n    sugar: number;\r\n    protein: number;\r\n    carbs: number;\r\n    fat: number;\r\n    fiber: number;\r\n    quantity: number;\r\n    servingSize: string;\r\n    emoji?: string;\r\n    category?: 'fruit' | 'vegetable' | 'protein' | 'grain' | 'dairy' | 'snack' | 'drink' | 'fast-food' | 'meal';\r\n}\r\n\r\nexport interface MealAnalysis {\r\n    items: FoodAnalysis[];\r\n    totalCalories: number;\r\n    totalSugar: number;\r\n    totalProtein: number;\r\n    totalCarbs: number;\r\n    totalFat: number;\r\n    healthScore: number; // 1-10\r\n    advice: string;\r\n}\r\n\r\n// ÔöÇÔöÇ Analyze a Single Food Item ÔöÇÔöÇ\r\n\r\n/**\r\n * Get nutrition for a food item.\r\n * 1. Check cache first (AI cache + local database)\r\n * 2. If not cached, ask AI\r\n * 3. Cache the AI result\r\n */\r\nexport async function analyzeFood(foodName: string): Promise<FoodNutritionCache | null> {\r\n    // 1. Cache-first lookup\r\n    const cached = lookupFood(foodName);\r\n    if (cached) return cached;\r\n\r\n    // 2. Ask AI\r\n    if (!isAIAvailable()) return null;\r\n\r\n    const prompt = `Analyze the nutritional content of \"${foodName}\" per standard serving.\r\nReturn ONLY valid JSON with this exact structure (no markdown, no explanation):\r\n{\r\n  \"name\": \"${foodName}\",\r\n  \"calories\": number,\r\n  \"sugar\": number (grams),\r\n  \"protein\": number (grams),\r\n  \"carbs\": number (grams),\r\n  \"fat\": number (grams),\r\n  \"fiber\": number (grams),\r\n  \"servingSize\": \"description of one standard serving\",\r\n  \"emoji\": \"single emoji representing the food\",\r\n  \"category\": \"one of: fruit, vegetable, protein, grain, dairy, snack, drink, fast-food, meal\"\r\n}`;\r\n\r\n    const result = await aiGenerateJSON<FoodAnalysis>({ prompt, temperature: 0.1 });\r\n\r\n    if (result && result.calories > 0) {\r\n        // 3. Cache the result\r\n        cacheAIFood({\r\n            name: result.name || foodName,\r\n            calories: result.calories,\r\n            sugar: result.sugar ?? 0,\r\n            protein: result.protein ?? 0,\r\n            carbs: result.carbs ?? 0,\r\n            fat: result.fat ?? 0,\r\n            fiber: result.fiber ?? 0,\r\n            servingSize: result.servingSize ?? '1 serving',\r\n        });\r\n\r\n        // Save to global Firestore DB\r\n        addFoodToGlobalDB({\r\n            id: result.name.toLowerCase().replace(/\\s+/g, '_'),\r\n            name: result.name,\r\n            emoji: result.emoji || '­şı¢´©Å',\r\n            calories: result.calories,\r\n            sugar: result.sugar ?? 0,\r\n            protein: result.protein ?? 0,\r\n            carbs: result.carbs ?? 0,\r\n            fat: result.fat ?? 0,\r\n            servingSize: result.servingSize ?? '1 serving',\r\n            category: result.category || 'meal',\r\n        });\r\n\r\n        return lookupFood(foodName);\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n// ÔöÇÔöÇ Analyze a Full Meal Description ÔöÇÔöÇ\r\n\r\n/**\r\n * Analyze a free-text meal description.\r\n * Breaks it into items, caches each, returns totals + health score.\r\n */\r\nexport async function analyzeMeal(description: string): Promise<MealAnalysis | null> {\r\n    if (!isAIAvailable()) return null;\r\n\r\n    const prompt = `Analyze this meal and break it into individual food items.\r\n    The meal description may be in Turkish or English. Translate food names to English for the \"name\" field if they are in Turkish, but keep the original Turkish name in parentheses if it helps clarity.\r\n    \r\n    For each item, provide nutritional analysis for the EXACT portion described (e.g., if \"200 grams\", calculate for 200g).\r\n    CRITICAL PORTION SIZES:\r\n    - If a weight/volume is given (e.g., \"200g\", \"1 cup\"), set \\`quantity\\` to 1, and set \\`servingSize\\` to that weight/volume (e.g., \"200 grams\").\r\n    - If a count is given (e.g., \"3 apples\"), set \\`quantity\\` to 3, and \\`servingSize\\` to \"1 medium apple\".\r\n    \r\n    IMPORTANT: All numerical values (calories, sugar, protein, carbs, fat, fiber) MUST be numbers, NOT strings. Do not include units like \"g\" or \"kcal\" in the number fields. If a value is unknown, use 0. Ensure the totalCalories matches the sum of the items.\r\n    \r\n    Meal: \"${description}\"\r\n    \r\n    Return ONLY valid JSON (no markdown):\r\n    {\r\n      \"items\": [\r\n        { \"name\": \"food name\", \"quantity\": number, \"calories\": number, \"sugar\": number, \"protein\": number, \"carbs\": number, \"fat\": number, \"fiber\": number, \"servingSize\": \"described portion\", \"emoji\": \"single emoji\", \"category\": \"category string\" }\r\n      ],\r\n      \"totalCalories\": number,\r\n      \"totalSugar\": number,\r\n      \"totalProtein\": number,\r\n      \"totalCarbs\": number,\r\n      \"totalFat\": number,\r\n      \"healthScore\": number (1-10, where 10 is healthiest),\r\n      \"advice\": \"1-2 sentences of health advice about this meal in the same language as the input\"\r\n    }`;\r\n\r\n    const result = await aiGenerateJSON<MealAnalysis>({ prompt, temperature: 0.2 });\r\n\r\n    if (result) {\r\n        // Cache each individual food item if present\r\n        if (result.items && Array.isArray(result.items)) {\r\n            for (const item of result.items) {\r\n                const calories = Number(item.calories) || 0;\r\n                if (calories > 0 && !lookupFood(item.name)) {\r\n                    cacheAIFood({\r\n                        name: item.name,\r\n                        calories: calories,\r\n                        sugar: Number(item.sugar) || 0,\r\n                        protein: Number(item.protein) || 0,\r\n                        carbs: Number(item.carbs) || 0,\r\n                        fat: Number(item.fat) || 0,\r\n                        fiber: Number(item.fiber) || 0,\r\n                        servingSize: item.servingSize ?? '1 serving',\r\n                    });\r\n\r\n                    // Save to global Firestore DB\r\n                    const safeId = item.name.toLowerCase().replace(/[^a-z0-9]+/g, '_').replace(/^_+|_+$/g, '');\r\n                    const safeCategory = (['fruit', 'vegetable', 'protein', 'grain', 'dairy', 'snack', 'drink', 'fast-food', 'meal'].includes(item.category || '') ? item.category : 'meal') as NonNullable<FoodAnalysis['category']>;\r\n\r\n                    if (safeId) {\r\n                        addFoodToGlobalDB({\r\n                            id: safeId,\r\n                            name: item.name,\r\n                            emoji: item.emoji || '­şı¢´©Å',\r\n                            calories: calories,\r\n                            sugar: Number(item.sugar) || 0,\r\n                            protein: Number(item.protein) || 0,\r\n                            carbs: Number(item.carbs) || 0,\r\n                            fat: Number(item.fat) || 0,\r\n                            servingSize: item.servingSize ?? '1 serving',\r\n                            category: safeCategory as NonNullable<FoodAnalysis['category']>,\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Ensure total attributes are numbers\r\n        result.totalCalories = Number(result.totalCalories) || 0;\r\n        result.totalSugar = Number(result.totalSugar) || 0;\r\n        result.totalProtein = Number(result.totalProtein) || 0;\r\n        result.totalCarbs = Number(result.totalCarbs) || 0;\r\n        result.totalFat = Number(result.totalFat) || 0;\r\n        result.healthScore = Number(result.healthScore) || 5;\r\n\r\n        return result;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n/**\r\n * Validate if a text input describes real food, drink, or meals.\r\n * Accepts any language.\r\n */\r\nexport async function validateFoodInput(text: string): Promise<{ isFood: boolean; reason: string }> {\r\n    if (!text.trim()) return { isFood: false, reason: 'Empty input' };\r\n    if (!isAIAvailable()) return { isFood: true, reason: 'AI unavailable' };\r\n\r\n    const prompt = `Check if the following text describes actual food, drink, snack, or meal. \r\n    Accept any language.\r\n    Input: \"${text}\"\r\n    \r\n    Respond ONLY with valid JSON structure (no markdown):\r\n    {\r\n      \"isFood\": boolean,\r\n      \"reason\": \"1 short sentence explaining why it is or isn't food in the same language as the input\"\r\n    }`;\r\n\r\n    try {\r\n        const result = await aiGenerateJSON<{ isFood: boolean; reason: string }>({ prompt, temperature: 0.1 });\r\n        return result || { isFood: true, reason: 'Validation passed' };\r\n    } catch (e) {\r\n        return { isFood: true, reason: 'Validation error, allowing' };\r\n    }\r\n}\r\n\r\n// ÔöÇÔöÇ Health Impact Calculation ÔöÇÔöÇ\r\n\r\n/**\r\n * Calculate HP/mana impact from a meal based on its healthScore.\r\n */\r\nexport function calculateHealthImpact(healthScore: number): { hpImpact: number; manaImpact: number } {\r\n    if (healthScore >= 8) return { hpImpact: Math.floor(Math.random() * 8 + 8), manaImpact: 5 };\r\n    if (healthScore >= 6) return { hpImpact: Math.floor(Math.random() * 5 + 3), manaImpact: 2 };\r\n    if (healthScore >= 4) return { hpImpact: 0, manaImpact: 0 };\r\n    return { hpImpact: -Math.floor(Math.random() * 8 + 3), manaImpact: -3 };\r\n}\r\n\r\n// ÔöÇÔöÇ AI-Powered Meal Suggestion ÔöÇÔöÇ\r\n\r\nexport async function getMealSuggestion(\r\n    bodyProfile: { targetWeightKg: number; weightKg: number; activityLevel: string } | null,\r\n    caloriesConsumed: number,\r\n    calorieTarget: number\r\n): Promise<string | null> {\r\n    if (!isAIAvailable()) return null;\r\n\r\n    const remaining = calorieTarget - caloriesConsumed;\r\n    const isLosing = bodyProfile && bodyProfile.targetWeightKg < bodyProfile.weightKg;\r\n\r\n    const prompt = `You are a health nutrition advisor. Suggest a meal for someone who:\r\n- Has ${remaining > 0 ? remaining : 0} calories remaining today (target: ${calorieTarget} cal)\r\n- Is ${isLosing ? 'trying to lose weight' : 'maintaining/gaining weight'}  \r\n- Activity level: ${bodyProfile?.activityLevel ?? 'moderate'}\r\n\r\nGive ONE specific, practical meal suggestion in 1-2 sentences. Be encouraging.`;\r\n\r\n    const response = await aiGenerate({ prompt, temperature: 0.8 });\r\n    return response?.text ?? null;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\aiInsights.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\aiProvider.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\bmiCalculator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\botSimulation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\calorieCalculator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\cn.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\firebaseTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\firestoreSync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\fitnessCalculator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\foodDatabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\foodService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\gemini.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\insightService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\motivationEngine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\lib\\stripe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\ChatPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\ContactPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\DashboardPage.tsx","messages":[{"ruleId":"prefer-const","severity":2,"message":"'combinedAdvice' is never reassigned. Use 'const' instead.","line":136,"column":17,"nodeType":"Identifier","messageId":"useConst","endLine":136,"endColumn":41,"fix":{"range":[6419,6453],"text":"const combinedAdvice: string[] = [];"}}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'generateDailyQuests' and 'updateStreak'. Either include them or remove the dependency array.","line":86,"column":8,"nodeType":"ArrayExpression","endLine":86,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [generateDailyQuests, updateStreak]","fix":{"range":[4583,4585],"text":"[generateDailyQuests, updateStreak]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'getHabitStreak', 'getTodayExercises', 'habits', 'streak', 'todayCalories.burned', 'todayCalories.consumed', 'todayCalories.target', 'todaySteps.steps', 'todaySteps.target', 'todaySugar.grams', 'todaySugar.target', 'todayWater.glasses', and 'todayWater.target'. Either include them or remove the dependency array.","line":112,"column":8,"nodeType":"ArrayExpression","endLine":112,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [getHabitStreak, getTodayExercises, habits, streak, todayCalories.burned, todayCalories.consumed, todayCalories.target, todaySteps.steps, todaySteps.target, todaySugar.grams, todaySugar.target, todayWater.glasses, todayWater.target]","fix":{"range":[5668,5670],"text":"[getHabitStreak, getTodayExercises, habits, streak, todayCalories.burned, todayCalories.consumed, todayCalories.target, todaySteps.steps, todaySteps.target, todaySugar.grams, todaySugar.target, todayWater.glasses, todayWater.target]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Heart, Zap, Star, Flame, MessageCircle, Plus, X,\r\n    TrendingUp, Target, UtensilsCrossed, Droplets,\r\n    Footprints, Candy, Sparkles, Shield, CigaretteOff, Ban\r\n} from 'lucide-react';\r\nimport { AreaChart, Area, XAxis, YAxis, ResponsiveContainer, Tooltip } from 'recharts';\r\nimport { PageTransition } from '../components/layout/PageTransition';\r\nimport { GlassCard } from '../components/ui/GlassCard';\r\nimport { StatCard } from '../components/ui/StatCard';\r\nimport { ProgressBar } from '../components/ui/ProgressBar';\r\nimport { XPRing } from '../components/ui/XPRing';\r\nimport { QuestCard } from '../components/ui/QuestCard';\r\nimport { MiniTracker } from '../components/ui/MiniTracker';\r\nimport { useAetherStore } from '../store/aetherStore';\r\nimport { useTrackersStore } from '../store/trackersStore';\r\nimport { useGreeting } from '../hooks/useGreeting';\r\nimport { getXPProgress, getXPForNextLevel } from '../lib/achievements';\r\nimport { getAlchemistAdvice } from '../lib/gemini';\r\nimport { getDailyInsight } from '../lib/aiInsights';\r\nimport { analyzeMeal, calculateHealthImpact, validateFoodInput } from '../lib/aiFoodAnalyzer';\r\nimport { isAIAvailable } from '../lib/aiProvider';\r\nimport { useToast } from '../context/ToastContext';\r\nimport { useSound } from '../lib/SoundManager';\r\nimport { StreakCalendar } from '../components/trackers/StreakCalendar';\r\n\r\nexport const DashboardPage: React.FC = () => {\r\n    const navigate = useNavigate();\r\n\r\n    // Select individual fields instead of entire store to prevent cascade re-renders\r\n    const profile = useAetherStore((s) => s.profile);\r\n    const hp = useAetherStore((s) => s.hp);\r\n    const mana = useAetherStore((s) => s.mana);\r\n    const xp = useAetherStore((s) => s.xp);\r\n    const level = useAetherStore((s) => s.level);\r\n    const streak = useAetherStore((s) => s.streak);\r\n    const daysActive = useAetherStore((s) => s.daysActive);\r\n    const mealsLogged = useAetherStore((s) => s.mealsLogged);\r\n    const questsCompleted = useAetherStore((s) => s.questsCompleted);\r\n    const quests = useAetherStore((s) => s.quests);\r\n    const mealHistory = useAetherStore((s) => s.mealHistory);\r\n    const hpHistory = useAetherStore((s) => s.hpHistory);\r\n    const generateDailyQuests = useAetherStore((s) => s.generateDailyQuests);\r\n    const updateStreak = useAetherStore((s) => s.updateStreak);\r\n\r\n    const logMeal = useAetherStore((s) => s.logMeal);\r\n    const updateQuestProgress = useAetherStore((s) => s.updateQuestProgress);\r\n    const completeQuest = useAetherStore((s) => s.completeQuest);\r\n\r\n    const getTodayWater = useTrackersStore((s) => s.getTodayWater);\r\n    const getTodaySteps = useTrackersStore((s) => s.getTodaySteps);\r\n    const getTodayCalories = useTrackersStore((s) => s.getTodayCalories);\r\n    const getTodaySugar = useTrackersStore((s) => s.getTodaySugar);\r\n    const addFood = useTrackersStore((s) => s.addFood);\r\n    const getTodayExercises = useTrackersStore((s) => s.getTodayExercises);\r\n    const habits = useTrackersStore((s) => s.habits);\r\n    const getHabitStreak = useTrackersStore((s) => s.getHabitStreak);\r\n    const greeting = useGreeting(profile?.name || 'Seeker');\r\n\r\n    const [showMealModal, setShowMealModal] = useState(false);\r\n    const [mealInput, setMealInput] = useState('');\r\n    const [isLogging, setIsLogging] = useState(false);\r\n\r\n    const [aiInsight, setAiInsight] = useState<string | null>(null);\r\n    const [validationError, setValidationError] = useState<string | null>(null);\r\n\r\n    const xpProgress = useMemo(() => getXPProgress(xp, level), [xp, level]);\r\n    const xpNeeded = useMemo(() => getXPForNextLevel(level), [level]);\r\n    const activeQuests = useMemo(() => quests.filter((q) => !q.completed).slice(0, 3), [quests]);\r\n\r\n    const todayWater = useMemo(() => getTodayWater(), [getTodayWater]);\r\n    const todaySteps = useMemo(() => getTodaySteps(), [getTodaySteps]);\r\n    const todayCalories = useMemo(() => getTodayCalories(), [getTodayCalories]);\r\n    const todaySugar = useMemo(() => getTodaySugar(), [getTodaySugar]);\r\n\r\n    const chartData = useMemo(() => hpHistory.slice(-7), [hpHistory]);\r\n    const recentMeals = useMemo(() => mealHistory.slice(0, 5), [mealHistory]);\r\n\r\n    // Generate daily quests on mount\r\n    useEffect(() => {\r\n        generateDailyQuests();\r\n        updateStreak();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    // Fetch AI daily insight\r\n    useEffect(() => {\r\n        if (isAIAvailable()) {\r\n            const todayExercises = getTodayExercises();\r\n            const sobrietyDays = habits.map(h => ({ name: h.name, days: getHabitStreak(h.id).days }));\r\n            const exerciseMinutes = todayExercises.reduce((sum, ex) => sum + ex.durationMin, 0);\r\n            const caloriesBurned = todayCalories.burned;\r\n\r\n            getDailyInsight({\r\n                waterGlasses: todayWater.glasses,\r\n                waterTarget: todayWater.target,\r\n                steps: todaySteps.steps,\r\n                stepsTarget: todaySteps.target,\r\n                caloriesConsumed: todayCalories.consumed,\r\n                calorieTarget: todayCalories.target,\r\n                sugarGrams: todaySugar.grams,\r\n                sugarTarget: todaySugar.target,\r\n                streak,\r\n                exerciseMinutes,\r\n                caloriesBurned,\r\n                sobrietyDays\r\n            }).then(setAiInsight);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    // (Check achievements globally handled in GamificationOverlay)\r\n\r\n    const { addToast } = useToast();\r\n    const { play } = useSound();\r\n\r\n    const handleLogMeal = useCallback(async () => {\r\n        if (!mealInput.trim()) return;\r\n        play('click');\r\n        setIsLogging(true);\r\n        setValidationError(null);\r\n\r\n        try {\r\n            // Split by newlines, process non-empty lines\r\n            const mealLines = mealInput.split('\\n').map(l => l.trim()).filter(Boolean);\r\n            if (mealLines.length === 0) {\r\n                setIsLogging(false);\r\n                return;\r\n            }\r\n\r\n            let totalHpImpact = 0;\r\n            let successCount = 0;\r\n            let wasNutritionTracked = false;\r\n            let combinedAdvice: string[] = [];\r\n\r\n            for (const line of mealLines) {\r\n                // Validate input first\r\n                const validation = await validateFoodInput(line);\r\n                if (!validation.isFood) {\r\n                    addToast(`Skipped \"${line}\": ${validation.reason}`, 'error');\r\n                    continue; // Skip invalid lines, but keep processing others\r\n                }\r\n\r\n                // Try AI-powered meal analysis\r\n                const mealAnalysis = await analyzeMeal(line);\r\n                let currentHpImpact: number;\r\n                let currentAdvice: string;\r\n\r\n                if (mealAnalysis) {\r\n                    wasNutritionTracked = true;\r\n                    const impact = calculateHealthImpact(mealAnalysis.healthScore);\r\n                    currentHpImpact = impact.hpImpact;\r\n                    currentAdvice = mealAnalysis.advice;\r\n\r\n                    // Also log individual items with their specific portions\r\n                    if (mealAnalysis.items && mealAnalysis.items.length > 0) {\r\n                        mealAnalysis.items.forEach(item => {\r\n                            addFood({\r\n                                foodId: `meal_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\r\n                                name: item.name,\r\n                                emoji: item.emoji || '­şı¢´©Å',\r\n                                calories: item.calories,\r\n                                sugar: item.sugar,\r\n                                protein: item.protein,\r\n                                carbs: item.carbs,\r\n                                fat: item.fat,\r\n                                servings: item.quantity || 1,\r\n                            });\r\n                        });\r\n                    } else if (mealAnalysis.totalCalories > 0) {\r\n                        // Fallback for aggregate only\r\n                        addFood({\r\n                            foodId: `meal_${Date.now()}`,\r\n                            name: line,\r\n                            emoji: '­şı¢´©Å',\r\n                            calories: mealAnalysis.totalCalories,\r\n                            sugar: mealAnalysis.totalSugar,\r\n                            protein: mealAnalysis.totalProtein,\r\n                            carbs: mealAnalysis.totalCarbs,\r\n                            fat: mealAnalysis.totalFat,\r\n                            servings: 1,\r\n                        });\r\n                    }\r\n                } else {\r\n                    // Fallback to old method\r\n                    const profileStr = `Goal: ${profile?.healthGoal}, Difficulty: ${profile?.difficulty}, HP: ${hp}`;\r\n                    currentAdvice = await getAlchemistAdvice(line, profileStr);\r\n                    const positive = /healthy|green|salad|fish|chicken|fruit|vegetable|water|soup|oat/i.test(line);\r\n                    currentHpImpact = positive ? Math.floor(Math.random() * 10 + 5) : -Math.floor(Math.random() * 10 + 3);\r\n                }\r\n\r\n                totalHpImpact += currentHpImpact;\r\n                combinedAdvice.push(currentAdvice);\r\n                successCount++;\r\n            }\r\n\r\n            if (successCount === 0) {\r\n                setValidationError('None of the lines provided were valid foods.');\r\n                play('error');\r\n                setIsLogging(false);\r\n                return;\r\n            }\r\n\r\n            // Log single combined meal entry to history\r\n            const compositeAdvice = combinedAdvice.join(' ');\r\n            logMeal(\r\n                mealLines.length > 1 ? `${mealLines.length} items logged` : mealLines[0],\r\n                totalHpImpact,\r\n                compositeAdvice\r\n            );\r\n\r\n            // Update quest progress for meal logging\r\n            quests.forEach((q) => {\r\n                if (q.title === 'Substance Analysis' && !q.completed) {\r\n                    updateQuestProgress(q.id, q.progress + successCount);\r\n                }\r\n            });\r\n\r\n            if (wasNutritionTracked) {\r\n                addToast(`Successfully tracked ${successCount} ${successCount === 1 ? 'item' : 'items'}.`, 'success');\r\n            } else {\r\n                addToast(`Logged ${successCount} ${successCount === 1 ? 'item' : 'items'}, but nutrition analysis failed.`, 'error');\r\n            }\r\n            play('success');\r\n\r\n            setMealInput('');\r\n            setShowMealModal(false);\r\n        } catch {\r\n            addToast('Failed to process sustenance.', 'error');\r\n            play('error');\r\n        }\r\n        setIsLogging(false);\r\n    }, [mealInput, profile, hp, quests, logMeal, updateQuestProgress, addFood, addToast, play]);\r\n\r\n    return (\r\n        <PageTransition className=\"space-y-6\">\r\n            {/* Global GamificationOverlay handles Achievement Toasts now */}\r\n\r\n            {/* Hero Greeting */}\r\n            <div className=\"flex items-start justify-between\">\r\n                <div>\r\n                    <motion.h1\r\n                        initial={{ opacity: 0, x: -20 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        className=\"text-3xl lg:text-4xl font-black text-white tracking-tight\"\r\n                    >\r\n                        {greeting}\r\n                    </motion.h1>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">\r\n                        Day {daysActive || 1} of your transmutation journey\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <span className=\"text-2xl\">{profile?.avatar}</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stat Cards Grid */}\r\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\r\n                <StatCard icon={Heart} label=\"Aether Integrity\" value={hp} color=\"rose\" subLabel=\"HP\">\r\n                    <ProgressBar value={hp} variant=\"rose\" size=\"sm\" />\r\n                </StatCard>\r\n                <StatCard icon={Zap} label=\"Zenith Focus\" value={mana} color=\"cyan\" subLabel=\"Mana\">\r\n                    <ProgressBar value={mana} variant=\"cyan\" size=\"sm\" />\r\n                </StatCard>\r\n                <StatCard icon={Flame} label=\"Streak\" value={streak} color=\"gold\" subLabel={`${streak} days`}>\r\n                    <div className=\"flex gap-0.5 mt-1\">\r\n                        {[...Array(7)].map((_, i) => {\r\n                            const activeDots = streak === 0 ? 0 : (streak % 7 || 7);\r\n                            return (\r\n                                <div key={i} className={`h-1.5 w-full rounded-full ${i < activeDots ? 'bg-amber-400' : 'bg-white/[0.04]'}`} />\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </StatCard>\r\n                <StatCard icon={Star} label=\"Total XP\" value={xp} color=\"emerald\" subLabel={`Lv.${level}`}>\r\n                    <ProgressBar value={xpProgress} variant=\"emerald\" size=\"sm\" />\r\n                </StatCard>\r\n            </div>\r\n\r\n            {/* Health Trackers Mini-Widgets */}\r\n            <div>\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                    <h3 className=\"text-sm font-bold text-white flex items-center gap-2\">\r\n                        <TrendingUp className=\"w-4 h-4 text-emerald-400\" /> Health Trackers\r\n                    </h3>\r\n                    <button onClick={() => navigate('/trackers')} className=\"text-xs text-emerald-400 hover:text-emerald-300 transition-colors cursor-pointer\">\r\n                        View All ÔåÆ\r\n                    </button>\r\n                </div>\r\n                <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\r\n                    <MiniTracker\r\n                        icon={Droplets}\r\n                        label=\"Water\"\r\n                        value={`${todayWater.glasses} glasses`}\r\n                        progress={(todayWater.glasses / todayWater.target) * 100}\r\n                        color=\"#06b6d4\"\r\n                    />\r\n                    <MiniTracker\r\n                        icon={Footprints}\r\n                        label=\"Steps\"\r\n                        value={`${todaySteps.steps} steps`}\r\n                        progress={(todaySteps.steps / todaySteps.target) * 100}\r\n                        color=\"#10b981\"\r\n                    />\r\n                    <MiniTracker\r\n                        icon={Flame}\r\n                        label=\"Calories\"\r\n                        value={`${todayCalories.consumed} kcal`}\r\n                        progress={(todayCalories.consumed / todayCalories.target) * 100}\r\n                        color=\"#f59e0b\"\r\n                    />\r\n                    <MiniTracker\r\n                        icon={Candy}\r\n                        label=\"Sugar\"\r\n                        value={`${todaySugar.grams}g`}\r\n                        progress={(todaySugar.grams / todaySugar.target) * 100}\r\n                        color=\"#f43f5e\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Active Journeys (Habits) Mini-Widget */}\r\n            {habits.length > 0 && (\r\n                <div className=\"mt-8\">\r\n                    <div className=\"flex items-center justify-between mb-3\">\r\n                        <h3 className=\"text-sm font-bold text-white flex items-center gap-2\">\r\n                            <Shield className=\"w-4 h-4 text-emerald-400\" /> Active Journeys\r\n                        </h3>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 gap-3\">\r\n                        {habits.slice(0, 2).map(habit => {\r\n                            const streak = getHabitStreak(habit.id);\r\n                            return (\r\n                                <GlassCard\r\n                                    key={habit.id}\r\n                                    className=\"p-3 cursor-pointer hover:bg-white/[0.05] transition-colors\"\r\n                                    onClick={() => navigate('/trackers')}\r\n                                >\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center\">\r\n                                            {habit.type === 'smoking' && <CigaretteOff className=\"w-4 h-4 text-emerald-400\" />}\r\n                                            {habit.type === 'nofap' && <Ban className=\"w-4 h-4 text-cyan-400\" />}\r\n                                            {habit.type === 'custom' && <Shield className=\"w-4 h-4 text-gray-400\" />}\r\n                                        </div>\r\n                                        <div className=\"min-w-0\">\r\n                                            <p className=\"text-[10px] font-bold text-white truncate\">{habit.name}</p>\r\n                                            <p className=\"text-[10px] text-emerald-400 font-mono\">{streak.days}d {streak.hours}h</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </GlassCard>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* AI Daily Insight */}\r\n            {aiInsight && (\r\n                <GlassCard glow=\"emerald\" padding=\"md\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                        <div className=\"w-9 h-9 rounded-xl bg-gradient-to-tr from-emerald-500/20 to-cyan-500/20 border border-emerald-500/15 flex items-center justify-center flex-shrink-0\">\r\n                            <Sparkles className=\"w-4 h-4 text-emerald-400\" />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-xs font-bold text-emerald-400 mb-1\">Alchemist's Daily Insight</p>\r\n                            <p className=\"text-sm text-gray-300 leading-relaxed\">{aiInsight}</p>\r\n                        </div>\r\n                    </div>\r\n                </GlassCard>\r\n            )}\r\n\r\n            {/* Middle Row: XP Ring + Chart */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n                {/* XP Ring + Level Info */}\r\n                <GlassCard className=\"flex flex-col items-center py-8\" glow=\"emerald\">\r\n                    <XPRing progress={xpProgress} level={level} size={140} />\r\n                    <p className=\"text-xs text-gray-500 mt-4 font-mono\">\r\n                        {xp} / {xpNeeded} XP to Level {level + 1}\r\n                    </p>\r\n                    <div className=\"flex gap-2 mt-4\">\r\n                        <span className=\"text-xs bg-emerald-500/10 text-emerald-400 px-2 py-1 rounded-lg font-medium\">\r\n                            ­şı¢´©Å {mealsLogged} meals\r\n                        </span>\r\n                        <span className=\"text-xs bg-amber-500/10 text-amber-400 px-2 py-1 rounded-lg font-medium\">\r\n                            ­şô£ {questsCompleted} quests\r\n                        </span>\r\n                    </div>\r\n                </GlassCard>\r\n\r\n                {/* HP Trend Chart */}\r\n                <GlassCard className=\"lg:col-span-2\">\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <TrendingUp className=\"w-4 h-4 text-emerald-400\" />\r\n                            <h3 className=\"text-sm font-bold text-white\">Integrity Trend</h3>\r\n                        </div>\r\n                        <span className=\"text-xs text-gray-600\">Last 7 entries</span>\r\n                    </div>\r\n                    {hpHistory.length > 1 ? (\r\n                        <ResponsiveContainer width=\"100%\" height={160}>\r\n                            <AreaChart data={chartData}>\r\n                                <defs>\r\n                                    <linearGradient id=\"hpGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                        <stop offset=\"5%\" stopColor=\"#10b981\" stopOpacity={0.3} />\r\n                                        <stop offset=\"95%\" stopColor=\"#10b981\" stopOpacity={0} />\r\n                                    </linearGradient>\r\n                                </defs>\r\n                                <XAxis dataKey=\"date\" tick={{ fontSize: 10, fill: '#525252' }} axisLine={false} tickLine={false} />\r\n                                <YAxis domain={[0, 100]} tick={{ fontSize: 10, fill: '#525252' }} axisLine={false} tickLine={false} />\r\n                                <Tooltip\r\n                                    contentStyle={{ background: '#111318', border: '1px solid rgba(255,255,255,0.06)', borderRadius: 8, fontSize: 12 }}\r\n                                    labelStyle={{ color: '#9ca3af' }}\r\n                                />\r\n                                <Area type=\"monotone\" dataKey=\"hp\" stroke=\"#10b981\" fill=\"url(#hpGradient)\" strokeWidth={2} />\r\n                            </AreaChart>\r\n                        </ResponsiveContainer>\r\n                    ) : (\r\n                        <div className=\"flex items-center justify-center h-[160px] text-gray-600 text-sm\">\r\n                            Log meals to see your trend chart appear here\r\n                        </div>\r\n                    )}\r\n                </GlassCard>\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\r\n                <button onClick={() => setShowMealModal(true)} className=\"btn-primary flex items-center justify-center gap-3 py-4 text-sm\">\r\n                    <UtensilsCrossed className=\"w-5 h-5\" /> Log Meal\r\n                </button>\r\n                <button onClick={() => navigate('/chat')} className=\"btn-secondary flex items-center justify-center gap-3 py-4 text-sm\">\r\n                    <MessageCircle className=\"w-5 h-5\" /> Ask Alchemist\r\n                </button>\r\n                <button onClick={() => {\r\n                    const q = quests.find(q => !q.completed);\r\n                    if (q) updateQuestProgress(q.id, q.progress + 1);\r\n                }} className=\"btn-secondary flex items-center justify-center gap-3 py-4 text-sm\">\r\n                    <Target className=\"w-5 h-5\" /> Quick Progress\r\n                </button>\r\n            </div>\r\n\r\n            {/* Gamification: Streak Calendar */}\r\n            <StreakCalendar />\r\n\r\n            {/* Active Quests */}\r\n            {activeQuests.length > 0 && (\r\n                <GlassCard>\r\n                    <div className=\"flex items-center gap-2 mb-4\">\r\n                        <Target className=\"w-4 h-4 text-cyan-400\" />\r\n                        <h3 className=\"text-sm font-bold text-white\">Active Quests</h3>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        {activeQuests.map((quest) => (\r\n                            <QuestCard\r\n                                key={quest.id}\r\n                                quest={quest}\r\n                                onComplete={() => completeQuest(quest.id)}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </GlassCard>\r\n            )}\r\n\r\n            {/* Recent Activity */}\r\n            {mealHistory.length > 0 && (\r\n                <GlassCard>\r\n                    <h3 className=\"text-sm font-bold text-white mb-4 flex items-center gap-2\">\r\n                        <UtensilsCrossed className=\"w-4 h-4 text-rose-400\" /> Recent Meals\r\n                    </h3>\r\n                    <div className=\"space-y-2\">\r\n                        {recentMeals.map((log) => (\r\n                            <div key={log.id} className=\"glass-subtle p-3 flex items-center justify-between\">\r\n                                <div>\r\n                                    <span className=\"text-sm font-medium text-white\">{log.meal}</span>\r\n                                    <span className=\"text-xs text-gray-600 ml-2\">\r\n                                        {new Date(log.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                    </span>\r\n                                </div>\r\n                                <span className={`text-xs font-bold ${log.hpImpact >= 0 ? 'text-emerald-400' : 'text-rose-400'}`}>\r\n                                    {log.hpImpact >= 0 ? '+' : ''}{log.hpImpact} HP\r\n                                </span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </GlassCard>\r\n            )}\r\n\r\n            {/* Meal Log Modal */}\r\n            <AnimatePresence>\r\n                {showMealModal && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm\"\r\n                        onClick={() => !isLogging && setShowMealModal(false)}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.95, y: 10 }}\r\n                            animate={{ scale: 1, y: 0 }}\r\n                            exit={{ scale: 0.95, y: 10 }}\r\n                            className=\"glass p-6 w-full max-w-md\"\r\n                            onClick={(e) => e.stopPropagation()}\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <h3 className=\"text-lg font-black text-white\">Log Meal</h3>\r\n                                <button onClick={() => setShowMealModal(false)} className=\"btn-ghost p-1\">\r\n                                    <X className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-500 mb-2\">What did you consume, Seeker?</p>\r\n                            <p className=\"text-xs text-emerald-400/60 mb-4 flex items-center gap-1\">\r\n                                <Sparkles className=\"w-3 h-3\" /> Separate multiple items with newlines\r\n                            </p>\r\n                            <textarea\r\n                                value={mealInput}\r\n                                onChange={(e) => {\r\n                                    setMealInput(e.target.value);\r\n                                    if (validationError) setValidationError(null);\r\n                                }}\r\n                                placeholder=\"e.g.&#10;Grilled salmon with broccoli&#10;2 cups of black coffee&#10;1 banana\"\r\n                                className={`input-field min-h-[120px] resize-none mb-4 ${validationError ? 'border-rose-500/50 bg-rose-500/5' : ''}`}\r\n                                autoFocus\r\n                            />\r\n\r\n                            {validationError && (\r\n                                <motion.div\r\n                                    initial={{ opacity: 0, height: 0 }}\r\n                                    animate={{ opacity: 1, height: 'auto' }}\r\n                                    className=\"bg-rose-500/10 border border-rose-500/20 rounded-xl p-3 mb-4\"\r\n                                >\r\n                                    <p className=\"text-xs text-rose-400 font-bold flex items-center gap-2\">\r\n                                        <X className=\"w-3 h-3\" /> {validationError}\r\n                                    </p>\r\n                                </motion.div>\r\n                            )}\r\n                            <div className=\"flex gap-3\">\r\n                                <button\r\n                                    onClick={handleLogMeal}\r\n                                    disabled={!mealInput.trim() || isLogging}\r\n                                    className=\"btn-primary flex-1 flex items-center justify-center gap-2\"\r\n                                >\r\n                                    {isLogging ? (\r\n                                        <>\r\n                                            <motion.div animate={{ rotate: 360 }} transition={{ duration: 1, repeat: Infinity }} className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full\" />\r\n                                            AI Analyzing...\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <Plus className=\"w-4 h-4\" /> Log & Analyze\r\n                                        </>\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </PageTransition>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\GamingPage.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'trackers'. Either include it or remove the dependency array.","line":29,"column":8,"nodeType":"ArrayExpression","endLine":29,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [trackers]","fix":{"range":[1243,1245],"text":"[trackers]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\JournalPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\LandingPage.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'words.length'. Either include it or remove the dependency array.","line":27,"column":8,"nodeType":"ArrayExpression","endLine":27,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [words.length]","fix":{"range":[768,770],"text":"[words.length]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Activity,\r\n    Brain,\r\n    Trophy,\r\n    Users,\r\n    Target,\r\n    Sparkles,\r\n    Dna,\r\n    ArrowRight,\r\n    ChevronRight\r\n} from 'lucide-react';\r\n\r\nexport const LandingPage: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const [currentWordIndex, setCurrentWordIndex] = useState(0);\r\n\r\n    const words = ['Vitality', 'Focus', 'Energy', 'Strength', 'Balance'];\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            setCurrentWordIndex((prev) => (prev + 1) % words.length);\r\n        }, 2500);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    // Generate random bar heights once on initial mount\r\n    const [barHeights] = useState(() => [1, 2, 3, 4, 5].map(() => Math.random() * 60 + 40));\r\n\r\n    const features = [\r\n        {\r\n            icon: <Target className=\"w-6 h-6 text-emerald-400\" />,\r\n            title: \"Smart Goal Tracking\",\r\n            desc: \"AI-powered objectives that adapt to your progress and energy levels.\"\r\n        },\r\n        {\r\n            icon: <Brain className=\"w-6 h-6 text-purple-400\" />,\r\n            title: \"Mental Clarity\",\r\n            desc: \"Meditation and journaling tools designed to enhance cognitive function.\"\r\n        },\r\n        {\r\n            icon: <Activity className=\"w-6 h-6 text-rose-400\" />,\r\n            title: \"Bio-Metric Analytics\",\r\n            desc: \"Deep insights into your health data with predictive analysis.\"\r\n        },\r\n        {\r\n            icon: <Dna className=\"w-6 h-6 text-cyan-400\" />,\r\n            title: \"Genetic Potential\",\r\n            desc: \"Unlock your latent capabilities through optimized habits.\"\r\n        },\r\n        {\r\n            icon: <Users className=\"w-6 h-6 text-amber-400\" />,\r\n            title: \"Community Guilds\",\r\n            desc: \"Join forces with other alchemists on the same path.\"\r\n        },\r\n        {\r\n            icon: <Trophy className=\"w-6 h-6 text-indigo-400\" />,\r\n            title: \"Gamified Growth\",\r\n            desc: \"Earn XP and ascend through ranks as you improve your life.\"\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div className=\"text-white\">\r\n            {/* Hero Section */}\r\n            <section className=\"relative pt-16 pb-20 px-6 max-w-7xl mx-auto text-center\">\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ duration: 0.6 }}\r\n                    className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 mb-8 backdrop-blur-sm\"\r\n                >\r\n                    <Sparkles className=\"w-4 h-4 text-emerald-400\" />\r\n                    <span className=\"text-sm font-medium text-emerald-200\">The Alchemist's Path v2.0 is Live</span>\r\n                </motion.div>\r\n\r\n                <motion.h1\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ duration: 0.6, delay: 0.1 }}\r\n                    className=\"text-5xl sm:text-6xl md:text-8xl font-black tracking-tight mb-8 leading-tight\"\r\n                >\r\n                    Master Your <br />\r\n                    <span className=\"relative inline-block\" style={{ minHeight: '1.15em' }}>\r\n                        <AnimatePresence mode=\"wait\">\r\n                            <motion.span\r\n                                key={words[currentWordIndex]}\r\n                                initial={{ y: 40, opacity: 0 }}\r\n                                animate={{ y: 0, opacity: 1 }}\r\n                                exit={{ y: -40, opacity: 0 }}\r\n                                transition={{ duration: 0.4, ease: \"easeOut\" }}\r\n                                className=\"inline-block text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400\"\r\n                            >\r\n                                {words[currentWordIndex]}\r\n                            </motion.span>\r\n                        </AnimatePresence>\r\n                    </span>\r\n                </motion.h1>\r\n\r\n                <motion.p\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ duration: 0.6, delay: 0.2 }}\r\n                    className=\"text-lg md:text-xl text-gray-400 max-w-2xl mx-auto mb-12 leading-relaxed\"\r\n                >\r\n                    Aetherius Vitality combines ancient wisdom with cutting-edge AI to help you transmute your potential into reality.\r\n                </motion.p>\r\n\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ duration: 0.6, delay: 0.3 }}\r\n                    className=\"flex flex-col sm:flex-row items-center justify-center gap-4\"\r\n                >\r\n                    <button\r\n                        onClick={() => navigate('/register')}\r\n                        className=\"h-14 px-8 text-lg bg-emerald-500 hover:bg-emerald-600 text-white rounded-full w-full sm:w-auto shadow-lg shadow-emerald-500/20 transition-all hover:scale-105 font-semibold flex items-center justify-center gap-2\"\r\n                    >\r\n                        Start Your Journey <ArrowRight className=\"w-5 h-5\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => navigate('/login')}\r\n                        className=\"h-14 px-8 text-lg rounded-full w-full sm:w-auto hover:bg-white/5 border border-white/10 font-medium transition-all\"\r\n                    >\r\n                        Sign In\r\n                    </button>\r\n                </motion.div>\r\n            </section>\r\n\r\n            {/* Floating Decorative Cards */}\r\n            <div className=\"relative max-w-7xl mx-auto px-6 hidden lg:block\" style={{ height: '120px' }}>\r\n                <div className=\"absolute left-0 top-0 w-64 p-4 rounded-2xl bg-white/5 border border-white/10 backdrop-blur-sm animate-float\">\r\n                    <div className=\"flex items-center gap-3 mb-3\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center\">\r\n                            <Activity className=\"w-5 h-5 text-emerald-400\" />\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"text-xs text-gray-400\">Recovery Score</div>\r\n                            <div className=\"text-lg font-bold text-white\">98%</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"h-2 bg-white/10 rounded-full overflow-hidden\">\r\n                        <div className=\"h-full bg-emerald-500 w-[98%] rounded-full\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"absolute right-0 top-0 w-64 p-4 rounded-2xl bg-white/5 border border-white/10 backdrop-blur-sm animate-float-delayed\">\r\n                    <div className=\"flex items-center gap-3 mb-3\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center\">\r\n                            <Brain className=\"w-5 h-5 text-purple-400\" />\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"text-xs text-gray-400\">Focus Streak</div>\r\n                            <div className=\"text-lg font-bold text-white\">12 Days</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex gap-1\">\r\n                        {barHeights.map((height, i) => (\r\n                            <div key={i} className=\"h-8 w-full bg-purple-500/20 rounded-sm flex items-end justify-center pb-1\">\r\n                                <div className=\"w-1 bg-purple-400 rounded-full\" style={{ height: `${height}%` }} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            {/* Features Grid */}\r\n            <section className=\"py-24 max-w-7xl mx-auto px-6\">\r\n                <div className=\"text-center mb-16\">\r\n                    <h2 className=\"text-3xl md:text-4xl font-bold mb-4\">Transmute Your Life</h2>\r\n                    <p className=\"text-gray-400 max-w-2xl mx-auto\">\r\n                        Comprehensive tools to master every aspect of your existence.\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                    {features.map((feature, idx) => (\r\n                        <motion.div\r\n                            key={idx}\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            whileInView={{ opacity: 1, y: 0 }}\r\n                            viewport={{ once: true, margin: \"-50px\" }}\r\n                            transition={{ delay: idx * 0.08, duration: 0.4 }}\r\n                            className=\"p-8 rounded-2xl bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] transition-all duration-300 group\"\r\n                        >\r\n                            <div className=\"w-12 h-12 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300\">\r\n                                {feature.icon}\r\n                            </div>\r\n                            <h3 className=\"text-lg font-bold mb-2\">{feature.title}</h3>\r\n                            <p className=\"text-gray-500 leading-relaxed text-sm\">\r\n                                {feature.desc}\r\n                            </p>\r\n                        </motion.div>\r\n                    ))}\r\n                </div>\r\n            </section>\r\n\r\n            {/* Pricing Teaser */}\r\n            <section className=\"py-20 max-w-4xl mx-auto px-6 text-center\">\r\n                <h2 className=\"text-3xl md:text-4xl font-bold mb-4\">Simple, Transparent Pricing</h2>\r\n                <p className=\"text-gray-400 mb-10 max-w-xl mx-auto\">\r\n                    Start free. Upgrade when you're ready to unlock your full potential.\r\n                </p>\r\n                <Link\r\n                    to=\"/pricing\"\r\n                    className=\"inline-flex items-center gap-2 h-14 px-8 text-lg bg-white/5 hover:bg-white/10 border border-white/10 text-white rounded-full font-medium transition-all group\"\r\n                >\r\n                    View Plans <ChevronRight className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" />\r\n                </Link>\r\n            </section>\r\n\r\n            {/* CTA Section */}\r\n            <section className=\"py-20 max-w-5xl mx-auto px-6 mb-10\">\r\n                <div className=\"relative rounded-3xl overflow-hidden p-12 md:p-20 text-center bg-gradient-to-b from-emerald-900/30 to-transparent border border-emerald-500/10\">\r\n                    <div className=\"relative z-10\">\r\n                        <h2 className=\"text-4xl md:text-5xl font-black mb-6\">Ready to Ascend?</h2>\r\n                        <p className=\"text-gray-300 text-lg max-w-2xl mx-auto mb-10\">\r\n                            Join thousands of others who are actively designing their dream lives with Aetherius Vitality.\r\n                        </p>\r\n                        <button\r\n                            onClick={() => navigate('/register')}\r\n                            className=\"h-16 px-10 text-xl bg-white text-emerald-900 hover:bg-gray-100 rounded-full font-bold shadow-2xl shadow-white/10 transition-all hover:scale-105\"\r\n                        >\r\n                            Begin Transformation\r\n                        </button>\r\n                        <p className=\"mt-4 text-xs text-gray-500\">No credit card required. Cancel anytime.</p>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\LeaderboardPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\MeditationPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\NotFoundPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\OnboardingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\PricingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\PrivacyPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\ProfilePage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\RegisterPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\ReportsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\ShopPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\TermsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\TrackersPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\pages\\social\\GuildsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\store\\aetherStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":201,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7191,7194],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7191,7194],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\r\nimport { getLevelFromXP, ACHIEVEMENTS } from '../lib/achievements';\r\nimport { format } from 'date-fns';\r\nimport { saveToFirestore, saveToFirestoreImmediate, loadFromFirestore, syncToLeaderboard, removeFromLeaderboard } from '../lib/firestoreSync';\r\nimport { SHOP_ITEMS } from '../lib/ShopData';\r\n\r\nimport type {\r\n    UserProfileData as UserProfile,\r\n    QuestData as Quest,\r\n    JournalEntryData as JournalEntry,\r\n    ChatMessageData as ChatMessage,\r\n    MealLogData as MealLog,\r\n    HPHistoryData as HPHistory,\r\n    EquippedItemsData as EquippedItems,\r\n    ActiveBoostData as ActiveBoost\r\n} from '../lib/firebaseTypes';\r\n\r\ninterface AetherState {\r\n    // Internal\r\n    _uid: string | null;\r\n\r\n    // Profile\r\n    profile: UserProfile | null;\r\n    onboardingComplete: boolean;\r\n\r\n    // Stats\r\n    hp: number;\r\n    mana: number;\r\n    xp: number;\r\n    level: number;\r\n    streak: number;\r\n    lastActiveDate: string;\r\n\r\n    // Tracking\r\n    mealsLogged: number;\r\n    questsCompleted: number;\r\n    daysActive: number;\r\n    unlockedAchievements: string[];\r\n    coins: number;\r\n    inventory: string[];\r\n    equipped: EquippedItems;\r\n    activeBoosts: ActiveBoost[];\r\n\r\n    // Data\r\n    quests: Quest[];\r\n    journal: JournalEntry[];\r\n    chatHistory: ChatMessage[];\r\n    mealHistory: MealLog[];\r\n    hpHistory: HPHistory[];\r\n\r\n    // Loading\r\n    isAILoading: boolean;\r\n\r\n    // Actions ÔÇö Firestore\r\n    loadData: (uid: string) => Promise<void>;\r\n\r\n    // Actions ÔÇö Profile\r\n    setProfile: (profile: UserProfile) => void;\r\n    completeOnboarding: () => void;\r\n\r\n    // Actions ÔÇö Stats\r\n    setHP: (val: number) => void;\r\n    setMana: (val: number) => void;\r\n    addXP: (amount: number) => void;\r\n    updateStreak: () => void;\r\n\r\n    // Actions ÔÇö Logging\r\n    logMeal: (meal: string, hpImpact: number, advice: string) => void;\r\n\r\n    // Actions ÔÇö Quests\r\n    addQuest: (quest: Quest) => void;\r\n    updateQuestProgress: (questId: string, progress: number) => void;\r\n    completeQuest: (questId: string) => void;\r\n    generateDailyQuests: () => void;\r\n\r\n    // Actions ÔÇö Journal\r\n    addJournalEntry: (entry: string, mood: JournalEntry['mood']) => void;\r\n\r\n    // Actions ÔÇö Chat\r\n    addChatMessage: (message: Omit<ChatMessage, 'id' | 'timestamp'>) => void;\r\n    setAILoading: (loading: boolean) => void;\r\n    clearChat: () => void;\r\n\r\n    // Actions ÔÇö Achievements\r\n    checkAchievements: () => string[];\r\n\r\n    // Actions ÔÇö Data\r\n    resetProgress: () => void;\r\n    clearAllData: () => void;\r\n    exportData: () => string;\r\n\r\n    // Actions ÔÇö Economy\r\n    addCoins: (amount: number) => void;\r\n    purchaseItem: (itemId: string) => boolean;\r\n    equipItem: (itemId: string, category: 'theme' | 'frame' | 'title') => void;\r\n    checkBoosts: () => void;\r\n}\r\n\r\nconst clamp = (val: number, min: number, max: number) => Math.max(min, Math.min(max, val));\r\nconst uid = () => Math.random().toString(36).slice(2, 10);\r\n\r\nconst DAILY_QUESTS_POOL: Omit<Quest, 'id' | 'completed' | 'progress'>[] = [\r\n    { title: 'Substance Analysis', description: 'Log 3 meals today', type: 'daily', target: 3, rewardXP: 30, icon: '­şğ¬' },\r\n    { title: 'Hydration Protocol', description: 'Drink 8 glasses of water', type: 'daily', target: 8, rewardXP: 25, icon: '­şÆğ' },\r\n    { title: 'The Shore Patrol', description: 'Walk 5,000 steps', type: 'daily', target: 5000, rewardXP: 40, icon: '­şÜÂ' },\r\n    { title: 'Mindful Minute', description: 'Meditate for 10 minutes', type: 'daily', target: 10, rewardXP: 35, icon: '­şğİ' },\r\n    { title: 'Consult the Oracle', description: 'Ask the Alchemist for advice', type: 'daily', target: 1, rewardXP: 15, icon: '­şö«' },\r\n    { title: 'Journal Entry', description: 'Write in your journal', type: 'daily', target: 1, rewardXP: 20, icon: '­şôØ' },\r\n    { title: 'Early Riser', description: 'Log a meal before 9 AM', type: 'daily', target: 1, rewardXP: 25, icon: '­şîà' },\r\n    { title: 'Green Elixir', description: 'Eat a vegetable-based meal', type: 'daily', target: 1, rewardXP: 20, icon: '­şÑù' },\r\n];\r\n\r\n// Keys to persist to Firestore (exclude actions and internal fields)\r\nconst DATA_KEYS = [\r\n    'profile', 'onboardingComplete', 'hp', 'mana', 'xp', 'level', 'streak',\r\n    'lastActiveDate', 'mealsLogged', 'questsCompleted', 'daysActive',\r\n    'unlockedAchievements', 'quests', 'journal', 'chatHistory', 'mealHistory',\r\n    'unlockedAchievements', 'quests', 'journal', 'chatHistory', 'mealHistory',\r\n    'hpHistory', 'coins', 'inventory', 'equipped', 'activeBoosts',\r\n] as const;\r\n\r\nfunction getDataSnapshot(state: AetherState): Record<string, unknown> {\r\n    const data: Record<string, unknown> = {};\r\n    for (const key of DATA_KEYS) {\r\n        data[key] = state[key];\r\n    }\r\n    return data;\r\n}\r\n\r\n/** Auto-save helper ÔÇö call after any mutation */\r\nfunction autoSave(get: () => AetherState) {\r\n    const state = get();\r\n    if (state._uid) {\r\n        saveToFirestore(state._uid, 'aether', getDataSnapshot(state));\r\n\r\n        if (state.profile?.isPublic !== false) {\r\n            syncToLeaderboard(state._uid, {\r\n                name: state.profile?.name || 'Unknown',\r\n                avatar: state.profile?.avatar || '­şğÖ',\r\n                level: state.level,\r\n                xp: state.xp,\r\n                title: state.equipped?.title || 'Novice',\r\n            });\r\n        } else {\r\n            removeFromLeaderboard(state._uid);\r\n        }\r\n    }\r\n}\r\n\r\nexport const useAetherStore = create<AetherState>()((set, get) => ({\r\n    // Internal\r\n    _uid: null,\r\n\r\n    // Initial state\r\n    profile: null,\r\n    onboardingComplete: false,\r\n    hp: 75,\r\n    mana: 40,\r\n    xp: 0,\r\n    level: 1,\r\n    streak: 0,\r\n    lastActiveDate: '',\r\n    mealsLogged: 0,\r\n    questsCompleted: 0,\r\n    daysActive: 0,\r\n    unlockedAchievements: [],\r\n    quests: [],\r\n    journal: [],\r\n    chatHistory: [],\r\n    mealHistory: [],\r\n    hpHistory: [],\r\n    isAILoading: false,\r\n    coins: 0,\r\n    inventory: [],\r\n    equipped: { theme: 'default', frame: 'none', title: 'Novice' },\r\n    activeBoosts: [],\r\n\r\n    // Firestore\r\n    loadData: async (userUid) => {\r\n        set({ _uid: userUid });\r\n        const data = await loadFromFirestore(userUid, 'aether');\r\n        if (data) {\r\n            // Only apply known data keys\r\n            const patch: Record<string, unknown> = {};\r\n            for (const key of DATA_KEYS) {\r\n                if (data[key] !== undefined) patch[key] = data[key];\r\n            }\r\n\r\n            // Backfill coins for legacy users\r\n            // If xp > 0 but coins is undefined (or 0 and not explicitly set to 0? tricky. Assume undefined means new feature)\r\n            // But Firestore load returns existing data. If coins is missing there, it's undefined.\r\n            // Let's use a safe check: if coins is undefined in valid data, backfill.\r\n            const currentXP = (data.xp as number) || 0;\r\n            if (data.coins === undefined && currentXP > 0) {\r\n                patch.coins = Math.floor(currentXP * 0.5);\r\n                patch.inventory = [];\r\n            }\r\n\r\n            // Ensure title exists in equipped\r\n            if (data.equipped) {\r\n                patch.equipped = { ...data.equipped, title: (data.equipped as any).title || 'Novice' };\r\n            } else {\r\n                patch.equipped = { theme: 'default', frame: 'none', title: 'Novice' };\r\n            }\r\n\r\n            set(patch as Partial<AetherState>);\r\n        }\r\n    },\r\n\r\n    // Profile\r\n    setProfile: (profile) => {\r\n        set({ profile });\r\n        // Use immediate save ÔÇö profile set during onboarding must persist\r\n        const state = get();\r\n        if (state._uid) saveToFirestoreImmediate(state._uid, 'aether', getDataSnapshot(state));\r\n    },\r\n    completeOnboarding: () => {\r\n        set({ onboardingComplete: true });\r\n        // CRITICAL: must save immediately ÔÇö navigating away would lose the debounced write\r\n        const state = get();\r\n        if (state._uid) saveToFirestoreImmediate(state._uid, 'aether', getDataSnapshot(state));\r\n    },\r\n\r\n    // Stats\r\n    setHP: (val) => { set({ hp: clamp(val, 0, 100) }); autoSave(get); },\r\n    setMana: (val) => { set({ mana: clamp(val, 0, 100) }); autoSave(get); },\r\n    addXP: (amount) => {\r\n        const state = get();\r\n\r\n        // Check for active XP boosts\r\n        const xpBoost = state.activeBoosts.find(b => b.type === 'xp' && b.expiresAt > Date.now());\r\n        const finalXP = xpBoost ? amount * xpBoost.multiplier : amount;\r\n\r\n        // Apply streak multiplier\r\n        let streakMultiplier = 1;\r\n        if (state.streak >= 30) streakMultiplier = 1.5;\r\n        else if (state.streak >= 7) streakMultiplier = 1.25;\r\n        else if (state.streak >= 3) streakMultiplier = 1.1;\r\n\r\n        const totalXPAdd = Math.floor(finalXP * streakMultiplier);\r\n        const newXP = state.xp + totalXPAdd;\r\n        const newLevel = getLevelFromXP(newXP);\r\n\r\n        // Coin logic: 1 Coin per 1 XP (base)\r\n        // Check for coin boosts\r\n        const coinBoost = state.activeBoosts.find(b => b.type === 'coin' && b.expiresAt > Date.now());\r\n        const coinAmount = coinBoost ? totalXPAdd * coinBoost.multiplier : totalXPAdd;\r\n\r\n        set({ xp: newXP, level: newLevel });\r\n        get().addCoins(Math.floor(coinAmount));\r\n\r\n        // Deal passive damage to Guild Boss\r\n        import('./guildsStore').then(({ useGuildsStore }) => {\r\n            useGuildsStore.getState().dealBossDamage(totalXPAdd);\r\n        }).catch(err => console.error(\"Could not apply boss damage\", err));\r\n    },\r\n    updateStreak: () => {\r\n        const state = get();\r\n        const today = format(new Date(), 'yyyy-MM-dd');\r\n        if (state.lastActiveDate === today) return;\r\n\r\n        const yesterday = format(new Date(Date.now() - 86400000), 'yyyy-MM-dd');\r\n        const newStreak = state.lastActiveDate === yesterday ? state.streak + 1 : 1;\r\n        const newDaysActive = state.daysActive + 1;\r\n\r\n        // Record HP history\r\n        const newHPHistory = [...state.hpHistory, { date: today, hp: state.hp }].slice(-30);\r\n\r\n        set({\r\n            streak: newStreak,\r\n            lastActiveDate: today,\r\n            daysActive: newDaysActive,\r\n            hpHistory: newHPHistory,\r\n        });\r\n        autoSave(get);\r\n    },\r\n\r\n    // Logging\r\n    logMeal: (meal, hpImpact, advice) => {\r\n        const state = get();\r\n        const newHP = clamp(state.hp + hpImpact, 0, 100);\r\n        const newMana = clamp(state.mana + 3, 0, 100);\r\n        const log: MealLog = { id: uid(), meal, timestamp: Date.now(), hpImpact, advice };\r\n\r\n        set({\r\n            hp: newHP,\r\n            mana: newMana,\r\n            mealsLogged: state.mealsLogged + 1,\r\n            mealHistory: [log, ...state.mealHistory].slice(0, 100),\r\n        });\r\n\r\n        // Auto XP\r\n        get().addXP(10 + Math.abs(hpImpact));\r\n        get().updateStreak();\r\n    },\r\n\r\n    // Quests\r\n    addQuest: (quest) => { set((s) => ({ quests: [...s.quests, quest] })); autoSave(get); },\r\n    updateQuestProgress: (questId, progress) => {\r\n        set((s) => ({\r\n            quests: s.quests.map((q) =>\r\n                q.id === questId ? { ...q, progress: Math.min(progress, q.target) } : q\r\n            ),\r\n        }));\r\n        autoSave(get);\r\n    },\r\n    completeQuest: (questId) => {\r\n        const state = get();\r\n        const quest = state.quests.find((q) => q.id === questId);\r\n        if (!quest || quest.completed) return;\r\n\r\n        set((s) => ({\r\n            quests: s.quests.map((q) => q.id === questId ? { ...q, completed: true, progress: q.target } : q),\r\n            questsCompleted: s.questsCompleted + 1,\r\n        }));\r\n        get().addXP(quest.rewardXP);\r\n    },\r\n    generateDailyQuests: () => {\r\n        const state = get();\r\n        const today = format(new Date(), 'yyyy-MM-dd');\r\n        const hasTodayQuests = state.quests.some((q) => q.type === 'daily' && q.id.startsWith(today));\r\n        if (hasTodayQuests) return;\r\n\r\n        // Pick 3 random daily quests\r\n        const shuffled = [...DAILY_QUESTS_POOL].sort(() => Math.random() - 0.5);\r\n        const picked = shuffled.slice(0, 3).map((q) => ({\r\n            ...q,\r\n            id: `${today}-${uid()}`,\r\n            progress: 0,\r\n            completed: false,\r\n        }));\r\n        set((s) => ({\r\n            quests: [...picked, ...s.quests.filter((q) => q.type !== 'daily' || !q.completed)],\r\n        }));\r\n        autoSave(get);\r\n    },\r\n\r\n    // Journal\r\n    addJournalEntry: (entry, mood) => {\r\n        const newEntry: JournalEntry = {\r\n            id: uid(),\r\n            date: format(new Date(), 'yyyy-MM-dd HH:mm'),\r\n            entry,\r\n            mood,\r\n            hpAtTime: get().hp,\r\n        };\r\n        set((s) => ({ journal: [newEntry, ...s.journal].slice(0, 200) }));\r\n        get().addXP(15);\r\n    },\r\n\r\n    // Chat\r\n    addChatMessage: (message) => {\r\n        const newMessage: ChatMessage = { ...message, id: uid(), timestamp: Date.now() };\r\n        set((s) => ({ chatHistory: [...s.chatHistory, newMessage] }));\r\n\r\n        if (message.gameUpdates) {\r\n            const u = message.gameUpdates;\r\n            if (u.hp) get().setHP(get().hp + u.hp);\r\n            if (u.mana) get().setMana(get().mana + u.mana);\r\n            if (u.xp) get().addXP(u.xp);\r\n        }\r\n        autoSave(get);\r\n    },\r\n    setAILoading: (isAILoading) => set({ isAILoading }),\r\n    clearChat: () => { set({ chatHistory: [] }); autoSave(get); },\r\n\r\n    // Achievements\r\n    checkAchievements: () => {\r\n        const state = get();\r\n        const stats = {\r\n            mealsLogged: state.mealsLogged,\r\n            questsCompleted: state.questsCompleted,\r\n            daysActive: state.daysActive,\r\n            level: state.level,\r\n            streak: state.streak,\r\n            chatMessages: state.chatHistory.filter((m) => m.role === 'user').length,\r\n        };\r\n        const newlyUnlocked: string[] = [];\r\n        for (const ach of ACHIEVEMENTS) {\r\n            if (!state.unlockedAchievements.includes(ach.id) && ach.condition(stats)) {\r\n                newlyUnlocked.push(ach.id);\r\n            }\r\n        }\r\n        if (newlyUnlocked.length > 0) {\r\n            set({ unlockedAchievements: [...state.unlockedAchievements, ...newlyUnlocked] });\r\n            autoSave(get);\r\n        }\r\n        return newlyUnlocked;\r\n    },\r\n\r\n    // Data\r\n    resetProgress: () => {\r\n        set({\r\n            hp: 75, mana: 40, xp: 0, level: 1, streak: 0,\r\n            mealsLogged: 0, questsCompleted: 0, daysActive: 0,\r\n            unlockedAchievements: [], quests: [], journal: [],\r\n            chatHistory: [], mealHistory: [], hpHistory: [],\r\n            lastActiveDate: '',\r\n        });\r\n        autoSave(get);\r\n    },\r\n    clearAllData: () => set({\r\n        _uid: null,\r\n        profile: null, onboardingComplete: false,\r\n        hp: 75, mana: 40, xp: 0, level: 1, streak: 0,\r\n        mealsLogged: 0, questsCompleted: 0, daysActive: 0,\r\n        unlockedAchievements: [], quests: [], journal: [],\r\n        chatHistory: [], mealHistory: [], hpHistory: [],\r\n        lastActiveDate: '', isAILoading: false,\r\n    }),\r\n    exportData: () => JSON.stringify(get(), null, 2),\r\n\r\n    // Economy\r\n    addCoins: (amount) => {\r\n        set(s => ({ coins: s.coins + amount }));\r\n        autoSave(get);\r\n    },\r\n    purchaseItem: (itemId) => {\r\n        const state = get();\r\n        const item = SHOP_ITEMS.find(i => i.id === itemId);\r\n\r\n        if (!item) return false;\r\n\r\n        // Check ownership only for non-consumables\r\n        const isConsumable = item.category === 'boost' || item.category === 'utility';\r\n        if (!isConsumable && state.inventory.includes(itemId)) return false;\r\n\r\n        if (state.coins < item.cost) return false; // Too poor\r\n\r\n        const newCoins = state.coins - item.cost;\r\n        let newInventory = state.inventory;\r\n\r\n        // Only add non-consumables (and unique utility items like streak freeze if we want to limit them) to inventory\r\n        // For now, let's treat Streak Freeze as stackable logic but simplistic inventory:\r\n        // If I want to allow buying multiple streak freezes, I need a count.\r\n        // Current system: inventory is string[]. uniqueness is checked.\r\n        // So Streak Freeze is unique. ONE at a time.\r\n        // Boosts are consumable immediately, so NOT in inventory.\r\n\r\n        if (item.category !== 'boost') {\r\n            // Themes, Cosmetics, and Streak Freeze (if we want max 1)\r\n            // If streak freeze is consumable, we should allow buying it again if we don't have one?\r\n            // Logic above `if (!isConsumable && state.inventory.includes(itemId))` handles \"Max 1\".\r\n            // So if I have a streak freeze, I can't buy another.\r\n            // That's fine for MVP.\r\n            newInventory = [...state.inventory, itemId];\r\n        }\r\n\r\n        let newBoosts = state.activeBoosts;\r\n        if (item.category === 'boost' && item.durationHours) {\r\n            const type = item.id.includes('xp') ? 'xp' : 'coin';\r\n            const multiplier = item.id.includes('xp') ? 2 : 1.5;\r\n            newBoosts = [...state.activeBoosts, {\r\n                id: uid(),\r\n                type: type as 'xp' | 'coin',\r\n                multiplier,\r\n                expiresAt: Date.now() + (item.durationHours * 3600000)\r\n            }];\r\n        }\r\n\r\n        set({ coins: newCoins, inventory: newInventory, activeBoosts: newBoosts });\r\n        autoSave(get);\r\n        return true;\r\n    },\r\n    equipItem: (itemId, category) => {\r\n        const state = get();\r\n\r\n        if (category === 'title') {\r\n            if (itemId === 'Novice' || state.unlockedAchievements.includes(itemId)) {\r\n                set(s => ({ equipped: { ...s.equipped, title: itemId } }));\r\n                autoSave(get);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Verify ownership\r\n        if (!state.inventory.includes(itemId) && itemId !== 'default') return;\r\n\r\n        const item = SHOP_ITEMS.find(i => i.id === itemId);\r\n        // Allow equipping 'default' to reset\r\n        if (itemId === 'default') {\r\n            set(s => ({ equipped: { ...s.equipped, [category]: 'default' } }));\r\n            autoSave(get);\r\n            return;\r\n        }\r\n\r\n        if (item && (item.category === 'theme' || category === 'theme')) {\r\n            set(s => ({ equipped: { ...s.equipped, theme: item.value || 'default' } }));\r\n        }\r\n        autoSave(get);\r\n    },\r\n    checkBoosts: () => {\r\n        const state = get();\r\n        const now = Date.now();\r\n        if (state.activeBoosts.some(b => b.expiresAt < now)) {\r\n            set({ activeBoosts: state.activeBoosts.filter(b => b.expiresAt > now) });\r\n            autoSave(get);\r\n        }\r\n    }\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\store\\aiStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\store\\authStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\store\\foodStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\store\\guildStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\store\\guildsStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\store\\journalStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\store\\trackersStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\store\\userStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\src\\types\\firebaseTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\test-guild.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'collection' is defined but never used.","line":1,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":33,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"collection"},"fix":{"range":[20,32],"text":""},"desc":"Remove unused variable \"collection\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'addDoc' is defined but never used.","line":1,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":41,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"addDoc"},"fix":{"range":[32,40],"text":""},"desc":"Remove unused variable \"addDoc\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'snap' is defined but never used.","line":28,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1194,1197],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1194,1197],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { setDoc, doc, collection, addDoc, onSnapshot } from \"firebase/firestore\";\r\nimport { db } from \"./src/lib/firebase\";\r\nimport { signInWithEmailAndPassword, getAuth } from \"firebase/auth\";\r\nimport * as dotenv from \"dotenv\";\r\n\r\ndotenv.config();\r\n\r\nasync function test() {\r\n    const auth = getAuth();\r\n    await signInWithEmailAndPassword(auth, process.env.VITE_TEST_USER_EMAIL!, process.env.VITE_TEST_USER_PASSWORD!);\r\n    const user = auth.currentUser;\r\n\r\n    if (!user) {\r\n        console.log(\"No user!\");\r\n        return;\r\n    }\r\n    console.log(\"Logged in as\", user.uid);\r\n\r\n    try {\r\n        const guildId = \"test_guild_\" + Date.now();\r\n\r\n        console.log(\"1. Creating guild document...\");\r\n        await setDoc(doc(db, \"guilds\", guildId), { name: \"Test\", leaderId: user.uid, memberIds: [user.uid] });\r\n        console.log(\"Guild created successfully\");\r\n\r\n        console.log(\"2. Testing Subscriptions to missing rules (raids)...\");\r\n        onSnapshot(doc(db, 'guilds', guildId, 'raids', 'active'), {\r\n            next: (snap) => console.log(\"raids snapshot success\"),\r\n            error: (e) => console.error(\"raids snapshot Error:\", e.message)\r\n        });\r\n\r\n    } catch (e: any) {\r\n        console.error(\"FAILED OPERATIONS:\", e.message);\r\n    }\r\n\r\n    setTimeout(() => process.exit(0), 2000);\r\n}\r\n\r\ntest();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hamit\\Desktop\\aether-vitality\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
